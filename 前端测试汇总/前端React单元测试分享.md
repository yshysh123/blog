# å‰ç«¯ React å•å…ƒæµ‹è¯•

## å‰è¨€

é•¿æœŸä»¥æ¥ï¼Œå‰ç«¯å¼€å‘çš„å•å…ƒæµ‹è¯•å¹¶ä¸æ˜¯åœ¨å‰ç«¯çš„å¼€å‘è¿‡ç¨‹ä¸­æ‰€å¿…é¡»çš„ï¼Œä¹Ÿä¸æ˜¯æ¯ä¸ªå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆæ‰€æ³¨æ„å’Œé‡è§†çš„ï¼Œ
ç”šè‡³æ‰©å¤§åˆ°è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­å•å…ƒæµ‹è¯•è¿™ä¸€çŽ¯ä¹Ÿä¸æ˜¯åœ¨ç« ç¨‹ä¸Šæœ‰ä¹¦é¢è§„å®šæ‰€è¦æ±‚çš„ã€‚æ›¾ç»çš„æˆ‘ä¹Ÿé—®è¿‡è®¸å¤šæ¬¡è‡ªå·±ä»¥åŠèº«è¾¹çš„å‰ç«¯å·¥ç¨‹å¸ˆã€‚
ä¸ºä»€ä¹ˆå‰ç«¯è¦å†™å•å…ƒæµ‹è¯•ï¼Ÿå‰ç«¯çš„å•å…ƒæµ‹è¯•å’Œæµ‹è¯•å·¥ç¨‹å¸ˆçš„æµ‹è¯•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒèŠ±è´¹å¤§é‡æ—¶é—´ï¼ˆç”šè‡³å¯èƒ½å¤§äºŽ 50%ï¼‰çš„ä¹‹é—´åŽ»å†™å•å…ƒæµ‹è¯•å€¼ä¸å€¼å¾—ï¼Ÿ
è¿™ä¸ªé—®é¢˜æˆ‘ä»¬åŽé¢å†æ¥å›žç­”

## å‡†å¤‡: å‰ç«¯çŽ¯å¢ƒ

å¸¸è§çŽ¯å¢ƒéƒ¨ç½²æ–¹æ³•ï¼ŒåŸºæœ¬éƒ½æ˜¯åœ¨ nodejs å®˜ç½‘ä¸‹è½½ exeï¼Œmsi æ–‡ä»¶åŒå‡»å®‰è£…åŽç›´æŽ¥å¯ç”¨ã€‚
nodejs æ˜¯ä¸€é—¨æ›´æ–°å¾ˆå¿«çš„è¯­è¨€ï¼Œæˆ‘ä»¬å¸¸å¸¸è¦ç»´æŠ¤è€é¡¹ç›®ï¼Œè€é¡¹ç›®ä¾èµ–æŸä¸ªè¾ƒæ—©çš„ nodejs ç‰ˆæœ¬ï¼Œéšä¾¿å‡çº§ä¼šç”ŸæˆèŽ«åå…¶å¦™çš„é”™è¯¯ã€‚
è€Œ nodejs çš„ç”Ÿæ€çŽ¯å¢ƒæ˜¯æ€»åœ¨ä¸æ–­å‘å‰æŽ¨è¿›çš„ï¼Œå¾ˆå¤šå·¥å…·ï¼Œç¬¬ä¸‰æ–¹åŒ…éƒ½åœ¨å‰è¿›ï¼Œèˆå¼ƒæ—§çŽ¯å¢ƒã€‚
å¾ˆå¤šæ—¶å€™å¦‚æžœçŽ¯å¢ƒä¸å‡çº§ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å®‰è£…å¾ˆå¤šè€ç‰ˆæœ¬å·¥å…·ï¼Œè€Œä¸”è¿žæ–‡æ¡£éƒ½æŸ¥é˜…éƒ½ä¼šæ··ä¹±ï¼Œæˆ‘ä»¬ç¨‹åºå‘˜ä¹Ÿæœ‰éœ€è¦ä¿æŒæœ€æ–°çš„çŸ¥è¯†æ ˆçš„éœ€æ±‚ã€‚
æ­¤å¤„æŽ¨èä½¿ç”¨ç¼–ç¨‹è¯­è¨€ç‰ˆæœ¬åˆ‡æ¢å·¥å…· ðŸ€ï¼Œnodejs çš„å°±æ˜¯[nvm](https://github.com/creationix/nvm)ï¼Œ
å…¨ç§° Node Version Managerï¼Œå®˜ç½‘æœ‰å¤šç³»ç»Ÿå®‰è£…æ–¹å¼ã€‚

## ç¬¬ä¸€éƒ¨åˆ†: å‡½æ•°å¼å•å…ƒæµ‹è¯•

è¯´èµ·å•å…ƒæµ‹è¯•ï¼Œå¸‚é¢ä¸Šçš„å•å…ƒæµ‹è¯•å·¥å…·å½¢å½¢è‰²è‰²ï¼Œäº”èŠ±å…«é—¨ã€‚æœ€å¸¸ä½¿ç”¨çš„å·¥å…·ä¸º:Jest Mocha Jasmine

- ðŸ›  å·¥å…·[Jest](https://www.npmjs.com/package/eslint)
  å®‰è£…

  ```bash
  yarn add jest
  ```

  - facebook ååº„
  - åŸºäºŽ Jasmine è‡³ä»Šå·²ç»åšäº†å¤§é‡ä¿®æ”¹æ·»åŠ äº†å¾ˆå¤šç‰¹æ€§
  - å¼€ç®±å³ç”¨é…ç½®å°‘ï¼ŒAPI ç®€å•
  - æ”¯æŒæ–­è¨€å’Œä»¿çœŸ
  - æ”¯æŒå¿«ç…§æµ‹è¯•
  - åœ¨éš”ç¦»çŽ¯å¢ƒä¸‹æµ‹è¯•
  - äº’åŠ¨æ¨¡å¼é€‰æ‹©è¦æµ‹è¯•çš„æ¨¡å—
  - ä¼˜é›…çš„æµ‹è¯•è¦†ç›–çŽ‡æŠ¥å‘Šï¼ŒåŸºäºŽ Istanbul
  - æ™ºèƒ½å¹¶è¡Œæµ‹è¯•(å‚è€ƒ)
  - è¾ƒæ–°ï¼Œç¤¾åŒºä¸ååˆ†æˆç†Ÿ
  - å…¨å±€çŽ¯å¢ƒï¼Œæ¯”å¦‚ describe ä¸éœ€è¦å¼•å…¥ç›´æŽ¥ç”¨
  - è¾ƒå¤šç”¨äºŽ React é¡¹ç›®(ä½†å¹¿æ³›æ”¯æŒå„ç§é¡¹ç›®)

- ðŸ›  å·¥å…·[Mocha](https://mochajs.org/)
  å®‰è£…

  ```bash
  yarn add mocha
  ```

  - çµæ´»(ä¸åŒ…æ‹¬æ–­è¨€å’Œä»¿çœŸï¼Œè‡ªå·±é€‰å¯¹åº”å·¥å…·)
  - æµè¡Œçš„é€‰æ‹©ï¼šchaiï¼Œsinon
  - ç¤¾åŒºæˆç†Ÿç”¨çš„äººå¤šï¼Œæµ‹è¯•å„ç§ä¸œè¥¿ç¤¾åŒºéƒ½æœ‰ç¤ºä¾‹
  - éœ€è¦è¾ƒå¤šé…ç½®
  - å¯ä»¥ä½¿ç”¨å¿«ç…§æµ‹è¯•ï¼Œä½†ä¾ç„¶éœ€è¦é¢å¤–é…ç½®

ä¸ªäººæŽ¨èä½¿ç”¨jestè¿›è¡Œå•å…ƒæµ‹è¯•ã€‚ç†ç”±å¦‚ä¸‹ï¼š

  - jestä¸Žbabelå¯¹es6çš„è½¬ç é›†æˆè‰¯å¥½ã€‚
  - jestçš„apiæ–‡æ¡£å®Œæ•´ä¸”apiè®¾è®¡è‰¯å¥½ã€‚
  - jestå¯¹å¼‚æ­¥ä»£ç æµ‹è¯•å†…ç½®æ”¯æŒå®Œå–„ã€‚
  - jestå†…ç½®å®Œå–„çš„mockä¸Žstubå·¥å…·ã€‚
  - jestè¿è¡Œå¦‚é£žã€‚
  - jestå¯è‡ªè°ƒç”¨istanbulï¼Œæ— ç—›ç”Ÿæˆè¦†ç›–çŽ‡ç»Ÿè®¡æ–‡æ¡£ã€‚
  - jestä½¿ç”¨çº¦å®šå¤§äºŽé…ç½®çš„åŽŸåˆ™ï¼Œéœ€é…ç½®é¡¹è¾ƒå°‘ï¼Œä¸”åŒæ—¶å…¼é¡¾å®šåˆ¶éœ€æ±‚ã€‚
  - ä½¿ç”¨jsdomï¼Œåœ¨nodejsçŽ¯å¢ƒå¯æ¨¡æ‹Ÿæµè§ˆå™¨çŽ¯å¢ƒï¼Œä¸Žjesté›†æˆåŽæµ‹è¯•å‰ç«¯çš„æµè§ˆå™¨çŽ¯å¢ƒä»£ç ã€‚
  - jestæ–‡æ¡£ä¸°å¯Œä¸”æœ‰å¹¿æ³›çš„å¼€å‘è€…åŸºç¡€ã€‚

### å‡½æ•°å¼å•å…ƒæµ‹è¯•æ­¥éª¤

#### æµ‹è¯•å‰é¡»çŸ¥

  1. ä½¿ç”¨Jestè¿›è¡Œå•å…ƒæµ‹è¯•å¿…é¡»ä¿è¯å‡½æ•°å¼çº¯å‡½æ•°ã€‚å³å‡½æ•°æœ‰å…¥å‚å¹¶ä»¥returnç»“å°¾ã€‚
  2. å‡½æ•°å°½é‡ä¸è¦ä¾èµ–å¤–éƒ¨å˜é‡ã€‚
  3. reactå‡½æ•°ï¼ˆè¿”å›žå€¼ä¸ºJSXï¼‰ä¸è¾“å…¥è¯¥æµ‹è¯•èŒƒå›´

#### æµ‹è¯•æ­¥éª¤

  1. å†™ä¸€ä¸ªçº¯å‡½æ•°

  ```bash
    export default function(a){
      return a+2
    }
  ```

  2. åœ¨__test__æ–‡ä»¶å¤¹ä¸‹å»ºä¸€ä¸ªæ–‡ä»¶ fn.test.js

  3. è¿›è¡Œå•å…ƒæµ‹è¯•

  ```bash
  import fn from 'util/fn'
  describe('util/fn', () => {
    it('æµ‹è¯•fnæ–¹æ³•', () => {
      expect(fn(2)).toBe(4)
      expect(fn(3)).not.toBe(4)
    })
  })
  ```
  